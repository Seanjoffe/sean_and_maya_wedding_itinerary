<!doctype html>
<html lang="en">
<head>
  <!-- Structure-only HTML. Styles & JS are external. -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Maya & Sean — Wedding Week Itinerary</title>
  <meta name="description" content="Wedding week itinerary — mobile-friendly, loads from a local CSV in this repo." />

  <!-- Font perf: preconnect + cursive heading font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">

  <!-- Root-relative assets so they work at /home and /calendar -->
  <link rel="stylesheet" href="/styles.css?v=19" />
  <script src="/script.js" defer></script>
</head>
<body>
  <!-- ===== Banner with centered countdown (pastel bloom background) ===== -->
  <header class="banner">
    <div class="container inner">
      <div class="countdown-wrap">
        <div class="pill" id="countdown">Loading…</div>
      </div>
    </div>
  </header>

  <!-- ===== Site tabs (clean paths; JS intercepts clicks) ===== -->
  <nav class="site-tabs" role="tablist" aria-label="Site sections">
    <a href="/home" data-view="home" class="site-tab" aria-selected="true">Home</a>
    <a href="/calendar" data-view="calendar" class="site-tab" aria-selected="false">Calendar</a>
    <a href="/explore" data-view="explore" class="site-tab" aria-selected="false">Explore</a>
    <a href="/contacts" data-view="contacts" class="site-tab" aria-selected="false">Contacts</a>
  </nav>

  <!-- ===== HOME VIEW ===== -->
  <section id="home" class="view">
    <div class="container">
      <header class="hero">
        <h1 class="hero-title">Maya & Sean's Wedding Week</h1>
        <p class="hero-sub">
          <span id="wdate"></span> ·
          <a class="venue-link" href="https://maps.app.goo.gl/njqM2sQ83jtwhUE38" target="_blank" rel="noreferrer noopener">
            Villa Nona, Caesarea
          </a>
        </p>
      </header>

      <div class="grid">
        <div class="card">
          <h2 class="section-title">Welcome!</h2>
          <p>We're so excited to celebrate with you. Find key info, events, and places to explore during the week.</p>
          <ul class="bullets">
            <li>Tap <strong>Calendar</strong> to see the full itinerary.</li>
            <li>Use <strong>Explore</strong> for cafes, bars, and restaurants near the venues.</li>
            <li>In <strong>Contacts</strong>, reach important people and local emergency numbers.</li>
          </ul>
        </div>

        <div class="card">
          <h3 class="day-heading">Key Links</h3>
          <div class="btns">
            <a class="btn" id="addAllToCalendar" href="#" role="button">Add all events to my calendar</a>
            <a class="btn" id="downloadICS" href="#" role="button">Download .ics</a>
          </div>
        </div>

        <div id="error" class="error" style="display:none"></div>
      </div>
    </div>
  </section>

  <!-- ===== CALENDAR VIEW ===== -->
  <section id="calendar" class="view hidden" aria-live="polite" aria-busy="true">
    <div class="container">
      <h2 class="section-title">Calendar</h2>
      <div id="calendarList">
        <!-- populated by script.js -->
      </div>
      <div id="calendarError" class="error" style="display:none"></div>
    </div>
  </section>

  <!-- ===== EXPLORE VIEW (recommendations) ===== -->
  <section id="explore" class="view hidden" aria-live="polite" aria-busy="true">
    <div class="container">
      <h2 class="section-title">Explore</h2>
      <p class="muted">Our favorite restaurants, bars, and cafés. Filter, search, and open maps.</p>

      <!-- Controls -->
      <div class="grid" style="margin-top:8px">
        <div role="search" class="row" style="gap:10px">
          <input id="exploreSearch" type="search" placeholder="Search by name or address" aria-label="Search places"
                 style="padding:10px 12px; border-radius:12px; border: 1px solid var(--ring); width:100%; background:var(--surface); color:var(--text);" />
          <div class="btns" style="margin:0">
            <button id="exploreSortAZ" class="btn" type="button" aria-pressed="false">Sort A–Z</button>
            <button id="exploreClear" class="btn" type="button">Clear filters</button>
          </div>
        </div>

        <!-- Chips (Categories & Subcategories) -->
        <div>
          <p class="muted" style="margin:0 0 6px">Categories</p>
          <div id="chipCategories" class="chips" style="display:flex; flex-wrap:wrap; gap:8px;"></div>
        </div>
        <div>
          <p class="muted" style="margin:0 0 6px">Subcategories</p>
          <div id="chipSubcategories" class="chips" style="display:flex; flex-wrap:wrap; gap:8px;"></div>
        </div>
      </div>

      <div id="exploreList" class="grid" style="margin-top:12px">
        <!-- populated by script.js -->
      </div>
      <div id="exploreError" class="error" style="display:none"></div>
    </div>
  </section>

  <!-- ===== CONTACTS VIEW ===== -->
  <section id="contacts" class="view hidden" aria-live="polite" aria-busy="true">
    <div class="container">
      <h2 class="section-title">Contacts</h2>
      <p class="muted">Important people and emergency info for the week.</p>

      <!-- Important contacts (desktop table; mobile compact via CSS) -->
      <div class="card" style="padding:0">
        <table id="contactsTable" aria-describedby="contactsHelp" style="width:100%; border-collapse:collapse">
          <colgroup>
            <col class="col-name" />
            <col class="col-phone" />
            <col class="col-notes" />
            <col class="col-actions" />
          </colgroup>
          <thead>
            <tr>
              <th scope="col" style="text-align:left; padding:12px">Name</th>
              <th scope="col" style="text-align:left; padding:12px">Phone</th>
              <th scope="col" style="text-align:left; padding:12px">Notes</th>
              <th scope="col" style="text-align:left; padding:12px">Actions</th>
            </tr>
          </thead>
          <tbody><!-- populated by script.js --></tbody>
        </table>
        <p id="contactsHelp" class="visually-hidden">Tap Call or WhatsApp to contact.</p>
      </div>

      <!-- Emergency numbers (from CSV Category=Emergency) -->
      <div class="day-group" style="margin-top:18px">
        <h3 class="day-heading">Emergency Numbers</h3>
        <ul id="emergencyList">
          <!-- populated by script.js -->
        </ul>
      </div>

      <!-- Siren guidance -->
      <div class="day-group" style="margin-top:18px">
        <h3 class="day-heading">In Case a Siren Sounds</h3>
        <div class="card">
          <div id="sirenBlock" class="muted">
            <p>Sirens are very uncommon these days, and when they do happen, the vast majority of rockets are intercepted before reaching Israel. Still, just in case, here’s what to do:</p>
            <p><strong>Safest Places (in order of preference):</strong></p>
            <ul>
              <li>Your Mamad (protected room at home) — reinforced and safest.</li>
              <li>A Mamak (shared building shelter) — usually on your building’s ground floor.</li>
              <li>A Miklat (dedicated bomb shelter) — inside your building or nearby.</li>
              <li>An interior stairwell — away from windows and openings.</li>
              <li>An internal room — few or no outside walls or windows.</li>
              <li>A public shelter — like an opened communal shelter or underground station.</li>
            </ul>
            <p><strong>If you’re outside:</strong> Enter the nearest building. If you can’t, lie down and protect your head.</p>
            <p><strong>If you’re in a car:</strong> Pull over, get out, and move to the closest shelter or stairwell. If you can’t, lie down beside the car and cover your head.</p>
            <p>Stay inside for at least 10 minutes, or until officials say it’s safe.</p>

            <h4 class="day-heading" style="margin-top:12px">Stay Connected &amp; Prepared</h4>
            <p>Download these apps for real-time alerts:</p>
            <ul>
              <li><a href="https://apps.apple.com/us/app/redalert-ארגון-ידידים/id742658064" target="_blank" rel="noreferrer noopener">RedAlert (iOS)</a></li>
              <li><a href="https://play.google.com/store/apps/details?id=com.ushareit.redalert&hl=en_US" target="_blank" rel="noreferrer noopener">RedAlert (Android)</a></li>
              <li><a href="https://www.tzevaadom.org" target="_blank" rel="noreferrer noopener">Official Guidance (Hebrew)</a></li>
            </ul>
            <p>Keep your phone charged and notifications enabled. If there’s any urgent update from us, we’ll post it here and on the group chat.</p>
          </div>
        </div>

        <div id="contactsError" class="error" style="display:none"></div>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    Built with 💜 from Maya & Sean.
  </footer>
</body>
</html>
